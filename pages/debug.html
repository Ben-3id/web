<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug - Ù…ÙˆÙ‚Ø¹ Ø¥Ø³Ù„Ø§Ù…ÙŠ</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Scheherazade+New:wght@400;700&display=swap" rel="stylesheet">
    <style>
        .debug-section {
            background: white;
            padding: 2rem;
            margin: 1rem 0;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .debug-item {
            margin: 1rem 0;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #1e3c72;
        }
        .status-success { color: #28a745; }
        .status-error { color: #dc3545; }
        .status-warning { color: #ffc107; }
        .test-button {
            background: #1e3c72;
            color: white;
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            margin: 0.5rem;
        }
        .test-button:hover {
            background: #2a5298;
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="logo">
                <h1>Ù…Ø±Ø§Ù‚Ù‰ Ø§Ù„ÙˆØ¹Ù‰</h1>
                <p>ÙˆÙ‚Ù Ù„Ù„Ù‡</p>
            </div>
            <nav class="nav">
                <ul>
                    <li><a href="../home.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
                    <li><a href="debug.html">Debug</a></li>
                    <li><a href="contact.html">Ø§ØªØµÙ„ Ø¨Ù†Ø§</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="main">
        <div class="container">
            <div class="debug-section">
                <h1>ğŸ”§ Debug Page</h1>
                <p>Ø§Ø®ØªØ¨Ø§Ø± ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙˆØªØ´Ø®ÙŠØµ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„</p>
            </div>

            <div class="debug-section">
                <h2>ğŸ“Š Ø­Ø§Ù„Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h2>
                <div id="dataStatus" class="debug-item">
                    <div>Ø¬Ø§Ø±ÙŠ ÙØ­Øµ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</div>
                </div>
            </div>

            <div class="debug-section">
                <h2>ğŸ§­ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªÙ†Ù‚Ù„</h2>
                <div class="debug-item">
                    <h3>Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ØªÙ†Ù‚Ù„:</h3>
                    <button class="test-button" onclick="testNavigation('home')">Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
                    <button class="test-button" onclick="testNavigation('section')">Ø§Ø®ØªØ¨Ø§Ø± ØµÙØ­Ø© Ø§Ù„Ù‚Ø³Ù…</button>
                    <button class="test-button" onclick="testNavigation('topic')">Ø§Ø®ØªØ¨Ø§Ø± ØµÙØ­Ø© Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹</button>
                    <button class="test-button" onclick="testNavigation('contact')">Ø§Ø®ØªØ¨Ø§Ø± ØµÙØ­Ø© Ø§Ù„Ø§ØªØµØ§Ù„</button>
                </div>
            </div>

            <div class="debug-section">
                <h2>ğŸ” Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙˆØ¸Ø§Ø¦Ù</h2>
                <div class="debug-item">
                    <h3>ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…ÙˆÙ‚Ø¹:</h3>
                    <button class="test-button" onclick="testWebsiteFunctions()">Ø§Ø®ØªØ¨Ø§Ø± ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…ÙˆÙ‚Ø¹</button>
                    <button class="test-button" onclick="testDataAccess()">Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
                    <button class="test-button" onclick="testSearch()">Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¨Ø­Ø«</button>
                </div>
            </div>

            <div class="debug-section">
                <h2>ğŸ“± Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©</h2>
                <div class="debug-item">
                    <h3>Ø­Ø¬Ù… Ø§Ù„Ø´Ø§Ø´Ø©:</h3>
                    <div id="screenInfo">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
                </div>
            </div>

            <div class="debug-section">
                <h2>ğŸš¨ Ø³Ø¬Ù„ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡</h2>
                <div class="debug-item">
                    <div id="errorLog">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø®Ø·Ø§Ø¡</div>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 Ù…ÙˆÙ‚Ø¹ Ø¥Ø³Ù„Ø§Ù…ÙŠ. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.</p>
        </div>
    </footer>

    <script src="../data/data.js"></script>
    <script src="../js/script.js"></script>
    <script>
        // Debug functionality
        function logError(message) {
            const errorLog = document.getElementById('errorLog');
            const timestamp = new Date().toLocaleTimeString('ar-SA');
            errorLog.innerHTML += `<div class="status-error">[${timestamp}] ${message}</div>`;
        }

        function logSuccess(message) {
            const errorLog = document.getElementById('errorLog');
            const timestamp = new Date().toLocaleTimeString('ar-SA');
            errorLog.innerHTML += `<div class="status-success">[${timestamp}] ${message}</div>`;
        }

        function logWarning(message) {
            const errorLog = document.getElementById('errorLog');
            const timestamp = new Date().toLocaleTimeString('ar-SA');
            errorLog.innerHTML += `<div class="status-warning">[${timestamp}] ${message}</div>`;
        }

        // Test data loading
        function testDataStatus() {
            const dataStatus = document.getElementById('dataStatus');
            
            try {
                if (typeof islamicData !== 'undefined') {
                    const sectionsCount = islamicData.sections ? islamicData.sections.length : 0;
                    dataStatus.innerHTML = `
                        <div class="status-success">âœ… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­Ù…Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­</div>
                        <div>Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…: ${sectionsCount}</div>
                        <div>Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ù…ØªØ§Ø­Ø©: ${islamicData.sections ? islamicData.sections.map(s => s.title).join(', ') : 'Ù„Ø§ ØªÙˆØ¬Ø¯'}</div>
                    `;
                    logSuccess('ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­');
                } else {
                    dataStatus.innerHTML = '<div class="status-error">âŒ ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</div>';
                    logError('ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
                }
            } catch (error) {
                dataStatus.innerHTML = `<div class="status-error">âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ${error.message}</div>`;
                logError(`Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ${error.message}`);
            }
        }

        // Test navigation
        function testNavigation(type) {
            try {
                switch(type) {
                    case 'home':
                        window.location.href = '../home.html';
                        break;
                    case 'section':
                        window.location.href = 'section.html?sectionId=aqeedah';
                        break;
                    case 'topic':
                        window.location.href = 'topic.html?sectionId=aqeedah&topicId=tawheed';
                        break;
                    case 'contact':
                        window.location.href = 'contact.html';
                        break;
                }
                logSuccess(`ØªÙ… Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªÙ†Ù‚Ù„ Ø¥Ù„Ù‰: ${type}`);
            } catch (error) {
                logError(`Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªÙ†Ù‚Ù„ Ø¥Ù„Ù‰ ${type}: ${error.message}`);
            }
        }

        // Test website functions
        function testWebsiteFunctions() {
            try {
                if (window.website) {
                    const sections = window.website.getAllSections();
                    logSuccess(`ØªÙ… Ø§Ø®ØªØ¨Ø§Ø± ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…ÙˆÙ‚Ø¹. Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…: ${sections.length}`);
                } else {
                    logError('ÙƒØ§Ø¦Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹ ØºÙŠØ± Ù…ØªØ§Ø­');
                }
            } catch (error) {
                logError(`Ø®Ø·Ø£ ÙÙŠ Ø§Ø®ØªØ¨Ø§Ø± ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…ÙˆÙ‚Ø¹: ${error.message}`);
            }
        }

        // Test data access
        function testDataAccess() {
            try {
                if (window.IslamicWebsiteUtils) {
                    const sections = window.IslamicWebsiteUtils.getAllSections();
                    logSuccess(`ØªÙ… Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª. Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…: ${sections.length}`);
                } else {
                    logError('ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…ÙˆÙ‚Ø¹ ØºÙŠØ± Ù…ØªØ§Ø­Ø©');
                }
            } catch (error) {
                logError(`Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ${error.message}`);
            }
        }

        // Test search
        function testSearch() {
            try {
                if (window.IslamicWebsiteUtils) {
                    const results = window.IslamicWebsiteUtils.searchSections('Ø§Ù„ØªÙˆØ­ÙŠØ¯');
                    logSuccess(`ØªÙ… Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¨Ø­Ø«. Ø§Ù„Ù†ØªØ§Ø¦Ø¬: ${results.length}`);
                } else {
                    logError('ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø¨Ø­Ø« ØºÙŠØ± Ù…ØªØ§Ø­Ø©');
                }
            } catch (error) {
                logError(`Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨Ø­Ø«: ${error.message}`);
            }
        }

        // Test screen responsiveness
        function testScreenInfo() {
            const screenInfo = document.getElementById('screenInfo');
            screenInfo.innerHTML = `
                <div>Ø¹Ø±Ø¶ Ø§Ù„Ø´Ø§Ø´Ø©: ${window.innerWidth}px</div>
                <div>Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø´Ø§Ø´Ø©: ${window.innerHeight}px</div>
                <div>Ù†Ø³Ø¨Ø© Ø§Ù„Ø¹Ø±Ø¶ Ø¥Ù„Ù‰ Ø§Ù„Ø§Ø±ØªÙØ§Ø¹: ${(window.innerWidth / window.innerHeight).toFixed(2)}</div>
                <div>Ù†ÙˆØ¹ Ø§Ù„Ø¬Ù‡Ø§Ø²: ${window.innerWidth < 768 ? 'Ø¬ÙˆØ§Ù„' : 'Ø­Ø§Ø³ÙˆØ¨'}</div>
            `;
        }

        // Initialize debug page
        document.addEventListener('DOMContentLoaded', () => {
            testDataStatus();
            testScreenInfo();
            
            // Test for common issues
            setTimeout(() => {
                if (!window.website) {
                    logError('ÙƒØ§Ø¦Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹ ØºÙŠØ± Ù…ÙÙ†Ø´Ø£');
                }
                
                if (!window.IslamicWebsiteUtils) {
                    logError('ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…ÙˆÙ‚Ø¹ ØºÙŠØ± Ù…ØªØ§Ø­Ø©');
                }
                
                if (typeof islamicData === 'undefined') {
                    logError('Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± Ù…Ø­Ù…Ù„Ø©');
                }
            }, 1000);
        });

        // Monitor for errors
        window.addEventListener('error', (event) => {
            logError(`Ø®Ø·Ø£ ÙÙŠ JavaScript: ${event.message}`);
        });

        // Monitor for unhandled promise rejections
        window.addEventListener('unhandledrejection', (event) => {
            logError(`Ø®Ø·Ø£ ÙÙŠ Promise: ${event.reason}`);
        });
    </script>
</body>
</html> 